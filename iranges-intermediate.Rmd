# IRangesList

An IRangesList is simply a list of IRanges.

Why a separate class for this?

- Methods dispatching, 'we know what we get'.
- Easy to specify input and output.
    
Many XXList exists.
	
One biology use case: the set of transcripts of a gene.  Each transcript is an IRanges (each exon is a range), but we need something to glue the transcripts together.

# Rle
  
Rle are 'run-length encoded' vectors, which are very useful for representing coverage vectors efficiently.

```{r, echo=FALSE, fig.height=2, small.mar=TRUE}
plotRanges(ir)
```
```{r}
coverage(ir)
as.vector(coverage(ir))
``` 

***

Accessor functions `runLengths()`, `runValues()`.  This representation can be **dramatically** more efficient under certain conditions, for example if there are many zeroes (say ChIP-seq data). 

# Computing on Rle

Rle's can be extremely efficient, especially for really long vectors.
They support are a wide variety of operations

```{r}
coverage(ir1) + coverage(ir2)
range(coverage(ir2))
log(coverage(ir2))
``` 

***

`aggregate()` allows you to apply functions to the Rle inside an IRanges

```{r}
aggregate(coverage(ir2), IRanges(start = 3, width = 4), 
          FUN = mean)
``` 

This example computes the average coverage over each of a set of genomic intervals.

# Views

Often we have a big object (think genome) and we are interested in subsets of this object.

These subsets may be thought of as IRanges inside the object.  Think exons and genome sequence.  Key idea: store big object and just keep the ranges.

```{r}
library(BSgenome.Scerevisiae.UCSC.sacCer1)
vi <- Views(Scerevisiae$chr1, 
            start = seq(1, by = 10000, length = 20), 
            width = 1000)
head(vi, n = 4)
``` 

***

This looks like a `DNAStringSet`, but internally it is just a `IRange` and a pointer to the genome.  This paradigm can be used to write extremely efficient code, but it takes a while to get used to.

Views can also be made on coverage vectors

```{r}
coverage(ir)
Views(coverage(ir), start = 3, width = 4)
``` 

# IRanges: important types of objects

In summary, we have the following 

- IRanges (and normal IRanges), IRangesList
- Rle
- Views
- RangedData (not discussed): IRanges with metadata, think IRanges + data.frame

These types of objects allow you to accomplish many useful tasks in a very efficient manner, but they sometimes require a bit creativity.

